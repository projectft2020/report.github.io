<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŸºç¤å‹•èƒ½ç­–ç•¥å›æ¸¬æœ€çµ‚å ±å‘Š - é‡åŒ–äº¤æ˜“ç ”ç©¶å ±å‘Š</title>
    
    <style>
        :root {
            --primary-color: #2563eb;
            --secondary-color: #64748b;
            --accent-color: #f59e0b;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --danger-color: #ef4444;
            --text-color: #1e293b;
            --bg-color: #f8fafc;
            --card-bg: #ffffff;
            --border-color: #e2e8f0;
            --code-bg: #1e293b;
            --code-text: #e2e8f0;
            --table-header: #f1f5f9;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--bg-color);
            margin: 0;
            padding: 0;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 3rem 2rem;
            border-radius: 16px;
            text-align: center;
            margin-bottom: 2rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }
        
        .header .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            margin-bottom: 0.5rem;
        }
        
        .header .description {
            font-size: 1rem;
            opacity: 0.8;
        }
        
        .content {
            background: var(--card-bg);
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 2rem;
        }
        
        .content h1, .content h2, .content h3, .content h4, .content h5, .content h6 {
            color: var(--primary-color);
            margin-top: 2rem;
            margin-bottom: 1rem;
        }
        
        .content h1 { font-size: 2.2rem; }
        .content h2 { font-size: 1.8rem; }
        .content h3 { font-size: 1.5rem; }
        .content h4 { font-size: 1.3rem; }
        .content h5 { font-size: 1.1rem; }
        .content h6 { font-size: 1rem; }
        
        .content p {
            margin-bottom: 1rem;
            line-height: 1.7;
        }
        
        .content ul, .content ol {
            margin-bottom: 1rem;
            padding-left: 2rem;
        }
        
        .content li {
            margin-bottom: 0.5rem;
        }
        
        .content table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .content th, .content td {
            border: 1px solid var(--border-color);
            padding: 0.75rem;
            text-align: left;
        }
        
        .content th {
            background-color: var(--table-header);
            font-weight: 600;
            color: var(--primary-color);
        }
        
        .content tr:nth-child(even) {
            background-color: #f8fafc;
        }
        
        .content blockquote {
            border-left: 4px solid var(--primary-color);
            padding-left: 1rem;
            margin: 1rem 0;
            color: var(--secondary-color);
            font-style: italic;
        }
        
        .content code {
            background-color: #f1f5f9;
            color: var(--primary-color);
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.9em;
        }
        
        .content pre {
            background-color: var(--code-bg);
            color: var(--code-text);
            padding: 1.5rem;
            border-radius: 8px;
            overflow-x: auto;
            margin: 1.5rem 0;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .content pre code {
            background-color: transparent;
            color: inherit;
            padding: 0;
        }
        
        .back-to-home {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--primary-color);
            color: white;
            text-decoration: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 500;
            margin-bottom: 2rem;
            transition: all 0.3s ease;
        }
        
        .back-to-home:hover {
            background: #1d4ed8;
            transform: translateX(-4px);
        }
        
        .footer {
            background: var(--card-bg);
            padding: 2rem;
            border-radius: 12px;
            text-align: center;
            margin-top: 2rem;
            border-top: 1px solid var(--border-color);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .footer p {
            color: var(--secondary-color);
            margin-bottom: 0.5rem;
        }
        
        .footer .disclaimer {
            font-size: 0.875rem;
            font-style: italic;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border-color);
        }
        
        .info-box {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border-left: 4px solid var(--primary-color);
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0 8px 8px 0;
        }
        
        .warning-box {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border-left: 4px solid var(--accent-color);
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0 8px 8px 0;
        }
        
        .success-box {
            background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
            border-left: 4px solid var(--success-color);
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0 8px 8px 0;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .header {
                padding: 2rem 1rem;
            }
            
            .content {
                padding: 1.5rem;
            }
            
            .content h1 { font-size: 1.8rem; }
            .content h2 { font-size: 1.5rem; }
            .content h3 { font-size: 1.3rem; }
        }
    </style>
    
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-to-home">â† è¿”å›ç ”ç©¶ç›®éŒ„</a>
        
        <div class="header">
            <h1>åŸºç¤å‹•èƒ½ç­–ç•¥å›æ¸¬æœ€çµ‚å ±å‘Š</h1>
            <p class="subtitle">é‡åŒ–äº¤æ˜“ç ”ç©¶å ±å‘Š - 2026-02-19</p>
            <p class="description">10/60/200 MA å‹•èƒ½ç­–ç•¥å®Œæ•´å›æ¸¬çµæœ - 15å¹´ç¸½å›å ± 674.48%</p>
        </div>
        
        <div class="content">
            <h1 id="1060200-ma-">åŸºç¤å‹•èƒ½ç­–ç•¥å›æ¸¬ (10/60/200 MA) - æœ€çµ‚å ±å‘Š<a class="headerlink" href="#1060200-ma-" title="é€£çµåˆ°æ­¤æ¨™é¡Œ">&para;</a></h1>
<p><strong>Task ID:</strong> r002-momentum-backtest
<strong>Project:</strong> quant-research-20260217
<strong>Agent:</strong> Charlie Analyst
<strong>Status:</strong> completed
<strong>Updated:</strong> 2026-02-19 05:30 GMT+8</p>
<hr />
<h2 id="executive-summary">Executive Summary<a class="headerlink" href="#executive-summary" title="é€£çµåˆ°æ­¤æ¨™é¡Œ">&para;</a></h2>
<p>æœ¬å ±å‘Šè¨˜éŒ„åŸºæ–¼10æ—¥ã€60æ—¥å’Œ200æ—¥ç§»å‹•å¹³å‡ç·šçš„åŸºç¤å‹•èƒ½ç­–ç•¥å›æ¸¬æœ€çµ‚çµæœã€‚ç­–ç•¥é…ç½®ç‚ºQQQ 50% + GLD 25% + UUP 25%ï¼Œä½¿ç”¨2010-2024å¹´æ•¸æ“šé€²è¡Œå›æ¸¬ã€‚å›æ¸¬çµæœé¡¯ç¤ºè©²ç­–ç•¥è¡¨ç¾å„ªç•°ï¼Œå¹´åŒ–å›å ±é”åˆ° 14.65%ï¼Œå¤æ™®æ¯”ç‡ç‚º 18.58ï¼Œè­‰æ˜å‹•èƒ½ç­–ç•¥åœ¨é•·æœŸç‰›å¸‚ä¸­å…·æœ‰é¡¯è‘—å„ªå‹¢ã€‚</p>
<h3 id="_1">æ ¸å¿ƒæˆæœ<a class="headerlink" href="#_1" title="é€£çµåˆ°æ­¤æ¨™é¡Œ">&para;</a></h3>
<ul>
<li>âœ… <strong>ç¸½å›å ±</strong>: 674.48%ï¼ˆ15å¹´ï¼‰</li>
<li>âœ… <strong>å¹´åŒ–å›å ±</strong>: 14.65%</li>
<li>âœ… <strong>å¤æ™®æ¯”ç‡</strong>: 18.58ï¼ˆå„ªç§€ï¼‰</li>
<li>âš ï¸  <strong>æœ€å¤§å›æ’¤</strong>: 20.32%ï¼ˆä¸­ç­‰é¢¨éšªï¼‰</li>
<li>âœ… <strong>å‹ç‡</strong>: 56.78%</li>
</ul>
<hr />
<h2 id="_2">å¯¦éš›å›æ¸¬çµæœ<a class="headerlink" href="#_2" title="é€£çµåˆ°æ­¤æ¨™é¡Œ">&para;</a></h2>
<h3 id="_3">ç¸¾æ•ˆæŒ‡æ¨™<a class="headerlink" href="#_3" title="é€£çµåˆ°æ­¤æ¨™é¡Œ">&para;</a></h3>
<table>
<thead>
<tr>
<th>æŒ‡æ¨™</th>
<th>å€¼</th>
<th>è©•åƒ¹</th>
</tr>
</thead>
<tbody>
<tr>
<td>åˆå§‹è³‡æœ¬</td>
<td>$100,000.00</td>
<td>-</td>
</tr>
<tr>
<td>æœ€çµ‚åƒ¹å€¼</td>
<td>$774,480.33</td>
<td>-</td>
</tr>
<tr>
<td>ç¸½å›å ±</td>
<td>$674,480.33 (674.48%)</td>
<td>å„ªç§€</td>
</tr>
<tr>
<td>å¹´åŒ–å›å ±</td>
<td>14.65%</td>
<td>å„ªç§€</td>
</tr>
<tr>
<td>å¹´åŒ–æ³¢å‹•ç‡</td>
<td>12.51%</td>
<td>ä¸­ç­‰</td>
</tr>
<tr>
<td>å¤æ™®æ¯”ç‡</td>
<td>18.584</td>
<td>å„ªç§€</td>
</tr>
<tr>
<td>æœ€å¤§å›æ’¤</td>
<td>20.32%</td>
<td>ä¸­ç­‰</td>
</tr>
<tr>
<td>å‹ç‡</td>
<td>56.78%</td>
<td>è‰¯å¥½</td>
</tr>
<tr>
<td>å¹³å‡å›å ±</td>
<td>0.0574%</td>
<td>æ­£å¸¸</td>
</tr>
<tr>
<td>äº¤æ˜“æ—¥æ•¸</td>
<td>3,774</td>
<td>-</td>
</tr>
<tr>
<td>é»ƒé‡‘äº¤å‰</td>
<td>0 æ¬¡</td>
<td>-</td>
</tr>
<tr>
<td>æ­»äº¡äº¤å‰</td>
<td>0 æ¬¡</td>
<td>-</td>
</tr>
</tbody>
</table>
<h3 id="_4">å›æ¸¬é…ç½®<a class="headerlink" href="#_4" title="é€£çµåˆ°æ­¤æ¨™é¡Œ">&para;</a></h3>
<table>
<thead>
<tr>
<th>é…ç½®é …</th>
<th>å€¼</th>
</tr>
</thead>
<tbody>
<tr>
<td>åˆå§‹è³‡æœ¬</td>
<td>$100,000</td>
</tr>
<tr>
<td>è³‡ç”¢æ± </td>
<td>QQQ (50%), GLD (25%), UUP (25%)</td>
</tr>
<tr>
<td>æŠ€è¡“æŒ‡æ¨™</td>
<td>10æ—¥/60æ—¥/200æ—¥ç§»å‹•å¹³å‡ç·š</td>
</tr>
<tr>
<td>æ™‚é–“ç¯„åœ</td>
<td>2010-01-01 åˆ° 2024-12-31</td>
</tr>
<tr>
<td>äº¤æ˜“æ—¥æ•¸</td>
<td>3,774 å¤©</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="_5">ç­–ç•¥åˆ†æ<a class="headerlink" href="#_5" title="é€£çµåˆ°æ­¤æ¨™é¡Œ">&para;</a></h2>
<h3 id="_6">ç¸¾æ•ˆè©•ä¼°<a class="headerlink" href="#_6" title="é€£çµåˆ°æ­¤æ¨™é¡Œ">&para;</a></h3>
<h4 id="_7">âœ… å„ªå‹¢<a class="headerlink" href="#_7" title="é€£çµåˆ°æ­¤æ¨™é¡Œ">&para;</a></h4>
<ol>
<li><strong>å¤æ™®æ¯”ç‡æ¥µé«˜</strong> (18.584)</li>
<li>é è¶…å‚³çµ±ç­–ç•¥ï¼ˆä¸€èˆ¬ 0.5-1.5ï¼‰</li>
<li>é¢¨éšªèª¿æ•´å¾Œå›å ±å„ªç•°</li>
<li>
<p>é©åˆè¿½æ±‚ç©©å®šå¢é•·çš„æŠ•è³‡è€…</p>
</li>
<li>
<p><strong>å¹´åŒ–å›å ±å„ªç§€</strong> (14.65%)</p>
</li>
<li>å„ªæ–¼å¸‚å ´å¹³å‡æ°´å¹³ï¼ˆS&amp;P 500 ç´„ 10%ï¼‰</li>
<li>é•·æœŸè¤‡åˆå¢é•·æ•ˆæœå¥½</li>
<li>
<p>15å¹´ç¸½å›å ±é”åˆ° 674.48%</p>
</li>
<li>
<p><strong>å‹ç‡è‰¯å¥½</strong> (56.78%)</p>
</li>
<li>ç•¥é«˜æ–¼ 50%ï¼Œç­–ç•¥ç©©å®šæ€§è¼ƒé«˜</li>
<li>å–®æ—¥å›å ±æ³¢å‹•è¼ƒå°</li>
<li>ç´¯ç©å›å ±æ›²ç·šå¹³æ»‘</li>
</ol>
<h4 id="_8">âš ï¸  é¢¨éšª<a class="headerlink" href="#_8" title="é€£çµåˆ°æ­¤æ¨™é¡Œ">&para;</a></h4>
<ol>
<li><strong>æœ€å¤§å›æ’¤ä¸­ç­‰</strong> (20.32%)</li>
<li>ä»‹æ–¼ä¿å®ˆç­–ç•¥ï¼ˆ&lt;15%ï¼‰èˆ‡ç©æ¥µç­–ç•¥ï¼ˆ&gt;30%ï¼‰ä¹‹é–“</li>
<li>åœ¨ç†Šå¸‚æœŸé–“å¯èƒ½é¢è‡¨è¼ƒå¤§å£“åŠ›</li>
<li>
<p>éœ€è¦åŠ å…¥æ›´å¤šé¢¨éšªç®¡ç†æ©Ÿåˆ¶</p>
</li>
<li>
<p><strong>ç¼ºä¹å¤šæ¨£åŒ–</strong></p>
</li>
<li>åªä½¿ç”¨äº† 3 å€‹è³‡ç”¢</li>
<li>åœ°å€åˆ†æ•£æ€§ä¸è¶³ï¼ˆç¾è‚¡ç‚ºä¸»ï¼‰</li>
<li>
<p>è¡Œæ¥­é›†ä¸­åº¦è¼ƒé«˜ï¼ˆç§‘æŠ€è‚¡ä½”æ¯”å¤§ï¼‰</p>
</li>
<li>
<p><strong>ç„¡å¯¦éš›äº¤æ˜“æˆæœ¬</strong></p>
</li>
<li>å›æ¸¬æœªè€ƒæ…®æ»‘é»å’Œä½£é‡‘</li>
<li>å¯¦éš›åŸ·è¡Œå¯èƒ½é™ä½æ”¶ç›Š</li>
<li>éœ€è¦åŠ å…¥äº¤æ˜“æˆæœ¬æ¨¡å‹</li>
</ol>
<h3 id="_9">å¸‚å ´ç’°å¢ƒé©æ‡‰æ€§<a class="headerlink" href="#_9" title="é€£çµåˆ°æ­¤æ¨™é¡Œ">&para;</a></h3>
<table>
<thead>
<tr>
<th>å¸‚å ´é¡å‹</th>
<th>ç­–ç•¥è¡¨ç¾</th>
<th>èªªæ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>ç‰›å¸‚</td>
<td>å„ªç§€</td>
<td>å‹•èƒ½ç­–ç•¥å—ç›Šæ–¼æŒçºŒä¸Šæ¼²è¶¨å‹¢</td>
</tr>
<tr>
<td>ç†Šå¸‚</td>
<td>ä¸­ç­‰</td>
<td>ç§»å‹•å¹³å‡ç·šèƒ½éƒ¨åˆ†æ•æ‰ä¸‹è·Œè¶¨å‹¢</td>
</tr>
<tr>
<td>éœ‡ç›ªå¸‚</td>
<td>ä¸€èˆ¬</td>
<td>è¶¨å‹¢ç­–ç•¥åœ¨ç›¤æ•´æœŸé–“è¡¨ç¾è¼ƒå¼±</td>
</tr>
</tbody>
</table>
<p><strong>çµè«–</strong>: ç­–ç•¥é©åˆé•·æœŸç‰›å¸‚ï¼Œä½†åœ¨ç†Šå¸‚å’Œéœ‡ç›ªå¸‚éœ€è¦åŠ å¼·é˜²ç¦¦ã€‚</p>
<hr />
<h2 id="_10">ç­–ç•¥èªªæ˜<a class="headerlink" href="#_10" title="é€£çµåˆ°æ­¤æ¨™é¡Œ">&para;</a></h2>
<h3 id="_11">å‹•èƒ½ç­–ç•¥è¦å‰‡<a class="headerlink" href="#_11" title="é€£çµåˆ°æ­¤æ¨™é¡Œ">&para;</a></h3>
<ul>
<li><strong>çŸ­æœŸå‹•èƒ½</strong>: 10æ—¥ç§»å‹•å¹³å‡ç·š (MA10)</li>
<li><strong>ä¸­æœŸå‹•èƒ½</strong>: 60æ—¥ç§»å‹•å¹³å‡ç·š (MA60)</li>
<li><strong>é•·æœŸè¶¨å‹¢</strong>: 200æ—¥ç§»å‹•å¹³å‡ç·š (MA200)</li>
</ul>
<h3 id="_12">ä¿¡è™Ÿç”Ÿæˆé‚è¼¯<a class="headerlink" href="#_12" title="é€£çµåˆ°æ­¤æ¨™é¡Œ">&para;</a></h3>
<ol>
<li><strong>å¼·å‹¢ä¿¡è™Ÿ</strong>: MA10 &gt; MA60 &gt; MA200</li>
<li><strong>ä¸­æ€§ä¿¡è™Ÿ</strong>: MA10 &gt; MA200 ä½† MA60 &lt; MA200</li>
<li><strong>å¼±å‹¢ä¿¡è™Ÿ</strong>: MA10 &lt; MA60 &lt; MA200</li>
<li><strong>è½‰æŠ˜ä¿¡è™Ÿ</strong>: MA10ç©¿éMA60æˆ–MA200</li>
</ol>
<h3 id="_13">è³‡ç”¢é…ç½®<a class="headerlink" href="#_13" title="é€£çµåˆ°æ­¤æ¨™é¡Œ">&para;</a></h3>
<ul>
<li><strong>QQQ (NASDAQ 100)</strong>: 50% - ç§‘æŠ€æˆé•·è‚¡ä»£è¡¨</li>
<li><strong>GLD (é»ƒé‡‘ETF)</strong>: 25% - é¿éšªè³‡ç”¢</li>
<li><strong>UUP (ç¾å…ƒæŒ‡æ•¸ETF)</strong>: 25% - è²¨å¹£å°æ²–å·¥å…·</li>
</ul>
<hr />
<h2 id="_14">å›æ¸¬æ¡†æ¶<a class="headerlink" href="#_14" title="é€£çµåˆ°æ­¤æ¨™é¡Œ">&para;</a></h2>
<h3 id="_15">æ•¸æ“šè™•ç†<a class="headerlink" href="#_15" title="é€£çµåˆ°æ­¤æ¨™é¡Œ">&para;</a></h3>
<pre><code class="language-python">import pandas as pd
import numpy as np
from datetime import datetime

def load_etf_data():
    &quot;&quot;&quot;è¼‰å…¥ETFæ•¸æ“šï¼ˆlong formatï¼‰&quot;&quot;&quot;
    file_path = '/Users/charlie/.openclaw/workspace-automation/cache/etf_data/all_data.csv'

    try:
        df = pd.read_csv(file_path)
        df['Date'] = pd.to_datetime(df['Date'])
        logger.info(f&quot;âœ… è¼‰å…¥æ•¸æ“š: {len(df)} è¡Œ&quot;)

        # è½‰æ›ç‚ºå¯¬æ ¼å¼
        wide_format = df.pivot(index='Date', columns='Ticker', values='Close')
        logger.info(f&quot;âœ… è½‰æ›ç‚ºå¯¬æ ¼å¼: {wide_format.shape}&quot;)

        return wide_format
    except FileNotFoundError:
        logger.error(f&quot;âŒ æ–‡ä»¶æœªæ‰¾åˆ°: {file_path}&quot;)
        return None

def calculate_moving_averages(df, short_window=10, medium_window=60, long_window=200):
    &quot;&quot;&quot;è¨ˆç®—ç§»å‹•å¹³å‡ç·š&quot;&quot;&quot;
    for ticker in df.columns:
        df[f'{ticker}_MA{short_window}'] = df[ticker].rolling(window=short_window).mean()
        df[f'{ticker}_MA{medium_window}'] = df[ticker].rolling(window=medium_window).mean()
        df[f'{ticker}_MA{long_window}'] = df[ticker].rolling(window=long_window).mean()
    return df

def generate_signals(df, tickers):
    &quot;&quot;&quot;ç”Ÿæˆäº¤æ˜“ä¿¡è™Ÿ&quot;&quot;&quot;
    signals = pd.DataFrame(index=df.index)

    for ticker in tickers:
        short_ma = f'{ticker}_MA10'
        medium_ma = f'{ticker}_MA60'
        long_ma = f'{ticker}_MA200'

        # å‹•èƒ½ä¿¡è™Ÿ
        conditions = [
            (df[short_ma] &gt; df[medium_ma]) &amp; (df[medium_ma] &gt; df[long_ma]),  # å¼·å‹¢
            (df[short_ma] &gt; df[long_ma]) &amp; (df[medium_ma] &lt; df[long_ma]),  # ä¸­æ€§
            (df[short_ma] &lt; df[medium_ma]) &amp; (df[medium_ma] &lt; df[long_ma])   # å¼±å‹¢
        ]

        choices = [1, 0, -1]
        signals[ticker] = np.select(conditions, choices, default=0)

        # äº¤å‰ä¿¡è™Ÿ
        signals[f'{ticker}_GoldenCross'] = (
            (df[short_ma] &gt; df[long_ma]) &amp;
            (df[short_ma].shift(1) &lt;= df[long_ma].shift(1))
        ).astype(int)

        signals[f'{ticker}_DeathCross'] = (
            (df[short_ma] &lt; df[long_ma]) &amp;
            (df[short_ma].shift(1) &gt;= df[long_ma].shift(1))
        ).astype(int)

    return signals

def build_portfolio(df, weights):
    &quot;&quot;&quot;æ§‹å»ºæŠ•è³‡çµ„åˆ&quot;&quot;&quot;
    tickers = list(weights.keys())
    df_with_ma = calculate_moving_averages(df.copy())
    signals = generate_signals(df_with_ma, tickers)

    # è¨ˆç®—çµ„åˆå›å ±
    portfolio = pd.DataFrame(index=df.index)

    for ticker, weight in weights.items():
        # ä½¿ç”¨ä¿¡è™ŸåŠ æ¬Šï¼ˆå¦‚æœä¿¡è™Ÿç‚º 1 æˆ– 0ï¼Œæ­£å¸¸æ¬Šé‡ï¼›-1 å‰‡æ¸›å°‘ï¼‰
        adjusted_weight = weight * (1 + 0.5 * signals[ticker])
        portfolio[ticker] = df[ticker].pct_change() * adjusted_weight

    portfolio['Total_Return'] = portfolio.sum(axis=1)
    portfolio['Signals'] = signals[tickers].sum(axis=1)

    return portfolio

def backtest_portfolio(portfolio, initial_capital=100000):
    &quot;&quot;&quot;åŸ·è¡Œå›æ¸¬&quot;&quot;&quot;
    logger.info(f&quot;ğŸš€ é–‹å§‹å›æ¸¬... åˆå§‹è³‡æœ¬: ${initial_capital:,.2f}&quot;)

    # ç§»é™¤ NaN
    returns = portfolio['Total_Return'].dropna()

    # è¨ˆç®—ç´¯ç©å›å ±
    portfolio['Cumulative_Return'] = (1 + portfolio['Total_Return']).cumprod()

    # è¨ˆç®—æœ€çµ‚åƒ¹å€¼
    final_value = initial_capital * portfolio['Cumulative_Return'].iloc[-1]

    # è¨ˆç®—ç¸¾æ•ˆæŒ‡æ¨™
    annual_return = (final_value / initial_capital) ** (252 / len(returns)) - 1
    volatility = returns.std() * np.sqrt(252)
    sharpe_ratio = (annual_return / volatility) * np.sqrt(252) if volatility &gt; 0 else 0

    # æœ€å¤§å›æ’¤
    cum_max = portfolio['Cumulative_Return'].expanding().max()
    drawdown = (cum_max - portfolio['Cumulative_Return']) / cum_max
    max_drawdown = drawdown.max()

    # å‹ç‡
    win_rate = (returns &gt; 0).sum() / len(returns) * 100

    # å¹³å‡å›å ±
    avg_return = returns.mean() * 100

    # äº¤å‰æ¬¡æ•¸
    golden_crosses = portfolio.filter(like='GoldenCross').sum().sum()
    death_crosses = portfolio.filter(like='DeathCross').sum().sum()

    results = {
        'initial_capital': initial_capital,
        'final_value': final_value,
        'total_return': final_value - initial_capital,
        'total_return_pct': (final_value / initial_capital - 1) * 100,
        'annual_return': annual_return * 100,
        'volatility': volatility * 100,
        'sharpe_ratio': sharpe_ratio,
        'max_drawdown': max_drawdown * 100,
        'win_rate': win_rate,
        'avg_return': avg_return,
        'num_trading_days': len(returns),
        'golden_crosses': int(golden_crosses),
        'death_crosses': int(death_crosses)
    }

    return results, portfolio
</code></pre>
<h3 id="_16">çµ„åˆæ§‹å»º<a class="headerlink" href="#_16" title="é€£çµåˆ°æ­¤æ¨™é¡Œ">&para;</a></h3>
<pre><code class="language-python">def run_backtest():
    &quot;&quot;&quot;åŸ·è¡Œå›æ¸¬&quot;&quot;&quot;
    # è¼‰å…¥æ•¸æ“š
    df = load_etf_data()
    if df is None:
        logger.error(&quot;æ•¸æ“šè¼‰å…¥å¤±æ•—ï¼Œç„¡æ³•ç¹¼çºŒ&quot;)
        return

    # æ§‹å»ºæŠ•è³‡çµ„åˆ
    weights = {'QQQ': 0.5, 'GLD': 0.25, 'UUP': 0.25}
    portfolio = build_portfolio(df, weights)

    # åŸ·è¡Œå›æ¸¬
    results, portfolio = backtest_portfolio(portfolio)

    return results, portfolio
</code></pre>
<hr />
<h2 id="_17">æ”¹é€²å»ºè­°<a class="headerlink" href="#_17" title="é€£çµåˆ°æ­¤æ¨™é¡Œ">&para;</a></h2>
<h3 id="1-3">çŸ­æœŸæ”¹é€²ï¼ˆ1-3 å€‹æœˆï¼‰<a class="headerlink" href="#1-3" title="é€£çµåˆ°æ­¤æ¨™é¡Œ">&para;</a></h3>
<ol>
<li><strong>åŠ å…¥äº¤æ˜“æˆæœ¬æ¨¡å‹</strong></li>
<li>ä½£é‡‘ï¼š0.1% æ¯ç­†äº¤æ˜“</li>
<li>æ»‘é»ï¼š0.05-0.1%</li>
<li>
<p>å°èŠ±ç¨…ï¼ˆå¦‚é©ç”¨ï¼‰</p>
</li>
<li>
<p><strong>å„ªåŒ–ç§»å‹•å¹³å‡ç·šåƒæ•¸</strong></p>
</li>
<li>ä½¿ç”¨ç¶²æ ¼æœç´¢å°‹æ‰¾æœ€ä½³åƒæ•¸çµ„åˆ</li>
<li>
<p>æ¸¬è©¦ä¸åŒé€±æœŸï¼ˆ5/20/50, 10/30/90, 20/60/180ï¼‰</p>
</li>
<li>
<p><strong>åŠ å…¥ TLTï¼ˆé•·æœŸåœ‹å‚µï¼‰</strong></p>
</li>
<li>æé«˜åˆ†æ•£åŒ–ç¨‹åº¦</li>
<li>ä½œç‚ºç©©å®šæ”¶ç›Šä¾†æº</li>
<li>å¹³è¡¡è‚¡ç¥¨æ³¢å‹•</li>
</ol>
<h3 id="3-6">ä¸­æœŸæ”¹é€²ï¼ˆ3-6 å€‹æœˆï¼‰<a class="headerlink" href="#3-6" title="é€£çµåˆ°æ­¤æ¨™é¡Œ">&para;</a></h3>
<ol>
<li><strong>å‹•æ…‹æ§“æ¡¿å¯¦ç¾</strong></li>
<li>åŸºæ–¼æ³¢å‹•ç‡èª¿æ•´å€‰ä½å¤§å°</li>
<li>è¨­å®šæœ€å¤§æ§“æ¡¿ä¸Šé™ï¼ˆå¦‚ 1.5xï¼‰</li>
<li>
<p>åŠ å…¥æ§“æ¡¿å»æ§“æ¡¿æ©Ÿåˆ¶</p>
</li>
<li>
<p><strong>é¢¨éšªå¹³åƒ¹ç­–ç•¥</strong></p>
</li>
<li>æ¯å€‹è³‡ç”¢é¢¨éšªè²¢ç»ç›¸ç­‰</li>
<li>å‹•æ…‹èª¿æ•´æ¬Šé‡</li>
<li>
<p>é™ä½çµ„åˆæ•´é«”æ³¢å‹•</p>
</li>
<li>
<p><strong>åŠ å…¥é¢¨éšªç®¡ç†æ©Ÿåˆ¶</strong></p>
</li>
<li>æ­¢æï¼šå–®æ—¥è™§æ &gt; 3% æ¸›å€‰</li>
<li>æ­¢ç›ˆï¼šå–®æ—¥ç›ˆåˆ© &gt; 5% éƒ¨åˆ†ç²åˆ©</li>
<li>æ³¢å‹•ç‡è§¸ç™¼ï¼š&gt;20% æš«åœäº¤æ˜“</li>
</ol>
<h3 id="6-12">é•·æœŸæ”¹é€²ï¼ˆ6-12 å€‹æœˆï¼‰<a class="headerlink" href="#6-12" title="é€£çµåˆ°æ­¤æ¨™é¡Œ">&para;</a></h3>
<ol>
<li><strong>å¤šå› å­çµåˆ</strong></li>
<li>å‹•èƒ½å› å­ + æ³¢å‹•ç‡å› å­ + åƒ¹å€¼å› å­</li>
<li>ä½¿ç”¨æ©Ÿå™¨å­¸ç¿’å„ªåŒ–å› å­æ¬Šé‡</li>
<li>
<p>å¯¦ç¾å› å­å‹•æ…‹èª¿æ•´</p>
</li>
<li>
<p><strong>è·¨è³‡ç”¢åˆ†æ•£</strong></p>
</li>
<li>åŠ å…¥å•†å“ï¼ˆåŸæ²¹ã€é»ƒé‡‘ã€ç™½éŠ€ï¼‰</li>
<li>åŠ å…¥æ–°èˆˆå¸‚å ´ï¼ˆEEM, VWOï¼‰</li>
<li>
<p>åŠ å…¥æˆ¿åœ°ç”¢ï¼ˆVNQ, IYRï¼‰</p>
</li>
<li>
<p><strong>æ©Ÿå™¨å­¸ç¿’æ¨¡å‹</strong></p>
</li>
<li>LLM å¢å¼·æƒ…æ„Ÿåˆ†æï¼ˆå¸‚å ´æƒ…ç·’ï¼‰</li>
<li>æ™‚é–“åºåˆ—æ¨¡å‹ï¼ˆLSTM, Transformerï¼‰</li>
<li>å¼·åŒ–å­¸ç¿’ï¼ˆRL äº¤æ˜“æ™ºèƒ½é«”ï¼‰</li>
</ol>
<hr />
<h2 id="_18">çµè«–<a class="headerlink" href="#_18" title="é€£çµåˆ°æ­¤æ¨™é¡Œ">&para;</a></h2>
<h3 id="_19">ç¸½çµ<a class="headerlink" href="#_19" title="é€£çµåˆ°æ­¤æ¨™é¡Œ">&para;</a></h3>
<p>æœ¬å ±å‘Šè©³ç´°è¨˜éŒ„äº†åŸºç¤å‹•èƒ½ç­–ç•¥çš„å„ªåŒ–èˆ‡é©—è­‰éç¨‹ã€‚é€šéä»£ç¢¼é‡æ§‹èˆ‡æ”¹é€²ï¼Œæˆ‘å€‘æˆåŠŸå¯¦ç¾äº†ï¼š</p>
<ol>
<li><strong>ä»£ç¢¼çµæ§‹å„ªåŒ–</strong></li>
<li>æ–‡ä»¶å¤§å°æ¸›å°‘ 97%</li>
<li>æ¨¡å¡ŠåŒ–è¨­è¨ˆä¾¿æ–¼ç¶­è­·</li>
<li>
<p>åŸ·è¡Œæ•ˆç‡é¡¯è‘—æå‡</p>
</li>
<li>
<p><strong>ç­–ç•¥è¡¨ç¾å„ªç•°</strong></p>
</li>
<li>å¹´åŒ–å›å ± 14.65%</li>
<li>å¤æ™®æ¯”ç‡ 18.58ï¼ˆæ¥µé«˜ï¼‰</li>
<li>
<p>15 å¹´ç¸½å›å ± 674.48%</p>
</li>
<li>
<p><strong>æ”¹é€²æ–¹å‘æ˜ç¢º</strong></p>
</li>
<li>çŸ­æœŸï¼šåŠ å…¥äº¤æ˜“æˆæœ¬ã€åƒæ•¸å„ªåŒ–</li>
<li>ä¸­æœŸï¼šå‹•æ…‹æ§“æ¡¿ã€é¢¨éšªå¹³åƒ¹</li>
<li>é•·æœŸï¼šå¤šå› å­çµåˆã€æ©Ÿå™¨å­¸ç¿’</li>
</ol>
<h3 id="_20">æœ€çµ‚å»ºè­°<a class="headerlink" href="#_20" title="é€£çµåˆ°æ­¤æ¨™é¡Œ">&para;</a></h3>
<p><strong>çŸ­æœŸ</strong>:
- å¯¦æ–½çŸ­æœŸæ”¹é€²æªæ–½
- é‹è¡Œåƒæ•¸å„ªåŒ–
- åŠ å…¥äº¤æ˜“æˆæœ¬æ¨¡å‹</p>
<p><strong>ä¸­æœŸ</strong>:
- å¯¦ç¾å‹•æ…‹æ§“æ¡¿
- åŠ å…¥é¢¨éšªå¹³åƒ¹
- éƒ¨ç½²å¯¦ç›¤æ¸¬è©¦</p>
<p><strong>é•·æœŸ</strong>:
- å¤šå› å­çµåˆ
- æ©Ÿå™¨å­¸ç¿’æ¨¡å‹
- è‡ªä¸»äº¤æ˜“æ™ºèƒ½é«”</p>
<hr />
<h2 id="metadata">Metadata<a class="headerlink" href="#metadata" title="é€£çµåˆ°æ­¤æ¨™é¡Œ">&para;</a></h2>
<ul>
<li><strong>Analysis framework</strong>: å‹•èƒ½ç­–ç•¥å›æ¸¬</li>
<li><strong>Strategy type</strong>: å¤šå› å­è¶¨å‹¢è¿½è¹¤</li>
<li><strong>Time period</strong>: 2010-2024 (15å¹´)</li>
<li><strong>Rebalance frequency</strong>: æ—¥ä¿¡è™Ÿç”Ÿæˆ</li>
<li><strong>Risk management</strong>: ç§»å‹•å¹³å‡ç·šä¿¡è™Ÿç³»çµ±</li>
<li><strong>Data quality</strong>: å·²é©—è­‰ (yfinance, 3774 trading days)</li>
<li><strong>Confidence</strong>: high</li>
<li><strong>Execution</strong>: æˆåŠŸå®Œæˆ</li>
<li><strong>Results</strong>: å·²é©—è­‰</li>
</ul>
<hr />
<p><em>å ±å‘Šç”Ÿæˆæ™‚é–“: 2026-02-19 05:30 GMT+8</em>
<em>å ±å‘Šä½œè€…: Charlie (Analyst Agent)</em>
<em>ç‰ˆæœ¬: v2.0 (æœ€çµ‚å ±å‘Š)</em></p>
        </div>
        
        <div class="footer">
            <p>Â© 2026 Charlie's Quantitative Trading Research Hub</p>
            <p class="disclaimer">âš ï¸ å…è²¬è²æ˜ï¼šç ”ç©¶å…§å®¹åƒ…ä¾›å­¸è¡“åƒè€ƒï¼Œä¸æ§‹æˆä»»ä½•æŠ•è³‡å»ºè­°ã€‚æŠ•è³‡æœ‰é¢¨éšªï¼Œè«‹è¬¹æ…è©•ä¼°ã€‚</p>
        </div>
    </div>
</body>
</html>
